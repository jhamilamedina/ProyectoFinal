{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./Filter.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Filter=_ref=>{let{onSearch}=_ref;const[departments,setDepartments]=useState([]);const[provinces,setProvinces]=useState([]);const[districts,setDistricts]=useState([]);const[origin,setOrigin]=useState('');const[department,setDepartment]=useState('');const[province,setProvince]=useState('');const[district,setDistrict]=useState('');const[agencies,setAgencies]=useState([]);useEffect(()=>{// Fetch departments\naxios.get('http://localhost:8000/api/departamentos/').then(response=>{setDepartments(response.data);}).catch(error=>{console.error('Error fetching departments:',error);});},[]);useEffect(()=>{// Fetch provinces\nif(department){axios.get(\"http://localhost:8000/api/departamentos/\".concat(department,\"/\")).then(response=>{setProvinces(response.data.Provincias);setProvince('');setDistrict('');}).catch(error=>{console.error('Error fetching provinces:',error);});}else{setProvinces([]);setProvince('');setDistrict('');}},[department]);useEffect(()=>{if(province){axios.get(\"http://localhost:8000/api/provincias/\".concat(province,\"/\")).then(response=>{setDistricts(response.data.Distritos);setDistrict('');}).catch(error=>{console.error('Error fetching districts:',error);});}else{setDistricts([]);setDistrict('');}},[province]);const handleSearch=()=>{if(district){axios.get(\"http://localhost:8000/api/agenciasdistritos/\".concat(district,\"/\")).then(response=>{let filteredAgencies=response.data.Agencias;if(origin){filteredAgencies=filteredAgencies.filter(agency=>agency.direccion.includes(origin));}setAgencies(filteredAgencies);}).catch(error=>{console.error('Error fetching agencies',error);});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"filter-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Buscador de Agencias\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Origen (Lima Metropolitana):\",/*#__PURE__*/_jsxs(\"select\",{value:origin,onChange:e=>setOrigin(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un distrito\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Miraflores\",children:\"Miraflores\"}),/*#__PURE__*/_jsx(\"option\",{value:\"San Isidro\",children:\"San Isidro\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Departamento:\",/*#__PURE__*/_jsxs(\"select\",{value:department,onChange:e=>setDepartment(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un departamento\"}),departments.map(dept=>/*#__PURE__*/_jsx(\"option\",{value:dept.id,children:dept.nombre},dept.id))]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Provincia:\",/*#__PURE__*/_jsxs(\"select\",{value:province,onChange:e=>setProvince(e.target.value),disabled:!department,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione una provincia\"}),provinces.map(prov=>/*#__PURE__*/_jsx(\"option\",{value:prov.id,children:prov.nombre},prov.id))]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Distrito:\",/*#__PURE__*/_jsxs(\"select\",{value:district,onChange:e=>setDistrict(e.target.value),disabled:!province,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"|Seleccione un distrito\"}),districts.map(dist=>/*#__PURE__*/_jsx(\"option\",{value:dist.id,children:dist.nombre},dist.id))]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"Buscar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"agencies-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Agencias en el distrito seleccionado:\"}),agencies.length>0?/*#__PURE__*/_jsx(\"ul\",{children:agencies.map(agency=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:agency.nombre_referencial}),/*#__PURE__*/_jsx(\"p\",{children:agency.direccion}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Horario de atenci\\xF3n: \",agency.horario_de_atencion]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tel\\xE9fono: \",agency.telefono]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cochera: \",agency.cochera?'Sí':'No']}),/*#__PURE__*/_jsx(\"a\",{href:agency.link_mapa,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Ver en mapa\"}),/*#__PURE__*/_jsx(\"br\",{})]},agency.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No se encontraron agencias para el distrito seleccionado :c\"})]})]});};export default Filter;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Filter","_ref","onSearch","departments","setDepartments","provinces","setProvinces","districts","setDistricts","origin","setOrigin","department","setDepartment","province","setProvince","district","setDistrict","agencies","setAgencies","get","then","response","data","catch","error","console","concat","Provincias","Distritos","handleSearch","filteredAgencies","Agencias","filter","agency","direccion","includes","className","children","value","onChange","e","target","map","dept","id","nombre","disabled","prov","dist","onClick","length","nombre_referencial","horario_de_atencion","telefono","cochera","href","link_mapa","rel"],"sources":["/home/maly/repositorios/Proyecto_Envia_Ya/frontend/envia-ya/src/components/Filter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './Filter.css';\n\nconst Filter = ({ onSearch }) => {\n    const [departments, setDepartments] = useState([]);\n    const [provinces, setProvinces] = useState([]);\n    const [districts, setDistricts] = useState([]);\n    const [origin, setOrigin] = useState('');\n    const [department, setDepartment] = useState('');\n    const [province, setProvince] = useState('');\n    const [district, setDistrict] = useState('');\n    const [agencies, setAgencies] = useState([]);\n\n    useEffect(() => {\n        // Fetch departments\n        axios.get('http://localhost:8000/api/departamentos/')\n            .then(response => {\n                setDepartments(response.data);\n            })\n            .catch(error => {\n                console.error('Error fetching departments:', error);\n            });\n    }, []);\n\n    useEffect(() => {\n        // Fetch provinces\n        if (department) {\n            axios.get(`http://localhost:8000/api/departamentos/${department}/`)\n                .then(response => {\n                    setProvinces(response.data.Provincias);\n                    setProvince('');\n                    setDistrict('');\n                })\n                .catch(error => {\n                    console.error('Error fetching provinces:', error);\n                });\n        } else {\n            setProvinces([]);\n            setProvince('');\n            setDistrict('');\n        }\n    }, [department]);\n\n    useEffect(() => {\n        if (province) {\n            axios.get(`http://localhost:8000/api/provincias/${province}/`)\n                .then(response => {\n                    setDistricts(response.data.Distritos);\n                    setDistrict('');\n                })\n                .catch(error => {\n                    console.error('Error fetching districts:', error);\n                });\n        } else {\n            setDistricts([]);\n            setDistrict('');\n        }\n    }, [province]);\n\n    const handleSearch = () => {\n        if (district) {\n            axios.get(`http://localhost:8000/api/agenciasdistritos/${district}/`)\n                .then(response => {\n                    let filteredAgencies = response.data.Agencias;\n\n                    if (origin) {\n                        filteredAgencies = filteredAgencies.filter(agency =>\n                            agency.direccion.includes(origin)\n                        );\n                    }\n                    setAgencies(filteredAgencies);\n                })\n                .catch(error => {\n                    console.error('Error fetching agencies', error);\n                });\n        }\n    };\n\n    return (\n        <div className='filter-container'>\n            <h2>Buscador de Agencias</h2>\n            <div>\n                <label>\n                    Origen (Lima Metropolitana):\n                    <select value={origin} onChange={(e) => setOrigin(e.target.value)}>\n                        <option value=\"\">Seleccione un distrito</option>\n                        <option value=\"Miraflores\">Miraflores</option>\n                        <option value=\"San Isidro\">San Isidro</option>\n                    </select>\n                </label>\n            </div>\n            <div>\n                <label>\n                    Departamento:\n                    <select value={department} onChange={(e) => setDepartment(e.target.value)}>\n                        <option value=\"\">Seleccione un departamento</option>\n                        {departments.map((dept) => (\n                            <option key={dept.id} value={dept.id}>{dept.nombre}</option>\n                        ))}\n                    </select>\n                </label>\n            </div>\n            <div>\n                <label>\n                    Provincia:\n                    <select value={province} onChange={(e) => setProvince(e.target.value)} disabled={!department}>\n                        <option value=\"\">Seleccione una provincia</option>\n                        {provinces.map((prov) => (\n                            <option key={prov.id} value={prov.id}>{prov.nombre}</option>\n                        ))}\n                    </select>\n                </label>\n            </div>\n            <div>\n                <label>\n                    Distrito:\n                    <select value={district} onChange={(e) => setDistrict(e.target.value)} disabled={!province}>\n                        <option value=\"\">|Seleccione un distrito</option>\n                        {districts.map((dist) => (\n                            <option key={dist.id} value={dist.id}>{dist.nombre}</option>\n                        ))}\n                    </select>\n                </label>\n            </div>\n            <button onClick={handleSearch}>Buscar</button>\n            <div className=\"agencies-list\">\n                <h3>Agencias en el distrito seleccionado:</h3>\n                {agencies.length > 0 ? (\n                    <ul>\n                        {agencies.map((agency) => (\n                            <li key={agency.id}>\n                                <h4>{agency.nombre_referencial}</h4>\n                                <p>{agency.direccion}</p>\n                                <p>Horario de atención: {agency.horario_de_atencion}</p>\n                                <p>Teléfono: {agency.telefono}</p>\n                                <p>Cochera: {agency.cochera ? 'Sí' : 'No'}</p>\n                                <a href={agency.link_mapa} target=\"_blank\" rel=\"noopener noreferrer\">Ver en mapa</a>\n                                <br></br>\n                            </li>\n                        ))}\n                    </ul>\n                ) : (\n                    <p>No se encontraron agencias para el distrito seleccionado :c</p>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Filter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}